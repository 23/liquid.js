var Liquid=(function(){var A=new Class({initialize:function(O,N,P){this.tagName=O;this.markup=N;this.nodelist=this.nodelist||[];this.parse(P)},parse:function(N){},render:function(N){return""}});var D=new Class({Extends:A,initialize:function(O,N,P){this.blockName=O;this.blockDelimiter="end"+this.blockName;this.parent(O,N,P)},parse:function(P){this.nodelist=this.nodelist||[];$A(this.nodelist).empty();var O=P.shift();P.push("");while(P.length){if(/^\{\%/.test(O)){var N=O.match(/^\{\%\s*(\w+)\s*(.*)?\%\}$/);if(N){if(this.blockDelimiter==N[1]){this.endTag();return }if(N[1] in I.tags){this.nodelist.push(new I.tags[N[1]](N[1],N[2],P))}else{this.unknownTag(N[1],N[2],P)}}else{throw ("Tag '"+O+"' was not properly terminated with: %}")}}else{if(/^\{\{/.test(O)){this.nodelist.push(this.createVariable(O))}else{this.nodelist.push(O)}}O=P.shift()}this.assertMissingDelimitation()},endTag:function(){},unknownTag:function(N,P,O){switch(N){case"else":throw (this.blockName+" tag does not expect else tag");break;case"end":throw ("'end' is not a valid delimiter for "+this.blockName+" tags. use "+this.blockDelimiter);break;default:throw ("Unknown tag: "+N)}},createVariable:function(O){var N=O.match(/^\{\{(.*)\}\}$/);if(N){return new C(N[1])}else{throw ("Variable '"+O+"' was not properly terminated with: }}")}},render:function(N){return this.renderAll(this.nodelist,N)},renderAll:function(O,N){return $A(O||[]).map(function(R,Q){var P="";try{P=(R.render)?R.render(N):R}catch(S){P=N.handleError(S)}return P})},assertMissingDelimitation:function(){throw (this.blockName+" tag was never closed")}});var G=new Class({Extends:D,initialize:function(N){this.blockDelimiter=[];this.parse(N)},assertMissingDelimitation:function(){}});var L=new Class({initialize:function(N){this.context=N},respondTo:function(N){return(N in this)}});L.filters=$H({});L.globalFilter=function(N){L.filters.extend(N)};L.requiredMethods=$A(["respondTo","context"]);L.create=function(N){L.implement(L.filters);var O=new L(N);for(key in O){if(!L.filters.getKeys().contains(key)||!L.requiredMethods.contains(key)){delete O[key]}}return O};var J=/^\[(.*)\]$/;var E=/\[[^\]]+\]|(?:[\w\-]\??)+/g;var K=new Class({initialize:function(O,N,P){this.scopes=[$H(O||{})];this.registers=N||{};this.errors=[];this.rethrowErrors=P;this.strainer=L.create(this)},get:function(N){return this.resolve(N)},set:function(N,O){this.scopes[0][N]=O},hasKey:function(N){return(this.resolve(N))?true:false},push:function(){var N=$H({});this.scopes.unshift(N);return N},merge:function(N){return this.scopes[0].extend(N)},pop:function(){if(this.scopes.length==1){throw"Context stack error"}return this.scopes.shift()},stack:function(O,P){var N=null;this.push();try{N=O.apply(P||this.strainer)}finally{this.pop()}return N},invoke:function(O,N){if(this.strainer.respondTo(O)){return this.strainer[O].run(N,this.strainer)}else{return $pick(N)}},resolve:function(R){switch(R){case null:case"nil":case"null":case"":return null;case"true":return true;case"false":return false;case"blank":case"empty":return"";default:if(R.test(/^'(.*)'$/)){return R.replace(/^'(.*)'$/,"$1")}else{if(R.test(/^"(.*)"$/)){return R.replace(/^"(.*)"$/,"$1")}else{if(R.test(/^(\d+)$/)){return parseInt(R.replace(/^(\d+)$/,"$1"))}else{if(R.test(/^(\d[\d\.]+)$/)){return parseFloat(R.replace(/^(\d[\d\.]+)$/,"$1"))}else{if(R.test(/^\((\S+)\.\.(\S+)\)$/)){var O=R.match(/^\((\S+)\.\.(\S+)\)$/),N=$A([]),S=O[1],Q=O[2];if(S>Q){for(var P=S;P>=Q;P--){N.push(P)}}else{for(var P=S;P<=Q;P++){N.push(P)}}return N}else{return this.variable(R)}}}}}}},findVariable:function(P){for(var O=0;O<this.scopes.length;O++){var Q=this.scopes[O];if(Q&&(P in Q)){var N=Q[P];if($type(N)=="function"){N=Q[P]=N.apply(this)}if($type(N)=="object"&&("toLiquid" in N)){N=N.toLiquid()}if($type(N)=="object"&&("setContext" in N)){N.setContext(self)}return N}}return null},variable:function(O){var S=O.match(E),Q=S.shift(),R=Q.match(J);if(R){Q=this.resolve(R[1])}var P=this.findVariable(Q),N=this;if(P){S.each(function(T){var U=T.match(J);if(U){var T=N.resolve(U[1]);if($type(P[T])=="function"){P[pos]=P[T].apply(this)}P=P[T];if($type(P)=="object"&&("toLiquid" in P)){P=P.toLiquid()}}else{if(($type(P)=="object"||$type(P)=="hash")&&(T in P)){res=P[T];if($type(res)=="function"){res=P[T]=res.apply(N)}if($type(res)=="object"&&("toLiquid" in res)){P=res.toLiquid()}else{P=res}}else{if((/^\d+$/).test(T)){pos=parseInt(T);if($type(P[pos])=="function"){P[pos]=P[pos].apply(N)}if($type(P[pos])=="object"&&$type(P[pos])=="object"&&("toLiquid" in P[pos])){P=P[pos].toLiquid()}else{P=P[pos]}}else{if($type(P[T])=="function"&&["length","size","first","last"].contains(T)){P=P[T].apply(T);if("toLiquid" in P){P=P.toLiquid()}}else{return null}}}if($type(P)=="object"&&("setContext" in P)){P.setContext(N)}}})}return P},addFilters:function(N){N=$splat(N).flatten();N.each(function(O){if($type(O)!="object"){throw ("Expected object but got: "+$type(O))}this.strainer.implement(O)})},handleError:function(N){this.errors.push(N);if(this.rethrowErrors){throw N}return"Liquid error: "+(N.message||N.description||N)}});var M=/(\{\%.*?\%\}|\{\{.*?\}\}?)/;var I=new Class({initialize:function(){this.root=null;this.registers=$H({});this.assigns=$H({});this.errors=[];this.rethrowErrors=false;this.lastContext=null},parse:function(N){this.root=new G(I.tokenize(N));return this},render:function(){if(!this.root){return""}var N=$A(arguments).associate(["ctx","filters","registers"]);var O=null;if(N.ctx instanceof K){O=N.ctx;this.assigns=O.assigns;this.registers=O.registers}else{if(N.ctx){this.assigns.extend(N.ctx)}if(N.registers){this.registers.extend(N.registers)}O=new K(this.assigns,this.registers,this.rethrowErrors)}if(N.filters){O.addFilters(arg.filters)}try{return this.root.render(O).join("")}finally{this.errors=O.errors;this.lastContext=O}},renderWithErrors:function(){this.renderWithErrors=true;return this.render.apply(this,arguments)}});I.fileSystem={};I.tags={};I.registerTag=function(O,N){I.tags[O]=N};I.registerFilter=function(N){L.globalFilter(N)};I.tokenize=function(O){var N=O.split(M);if(N[0]==""){N.shift()}return N};I.parse=function(N){return(new I()).parse(N)};var C=new Class({initialize:function(O){this.markup=O;this.name=null;this.filters=[];var N=this;var Q=O.match(/\s*("[^"]+"|'[^']+'|[^\s,|]+)/);if(Q){this.name=Q[1];var P=O.match(/\|\s*(.*)/);if(P){var R=P[1].split(/\|/);R.each(function(V){var U=V.match(/\s*(\w+)/);if(U){var T=U[1];var S=[];$A(V.match(/(?:[:|,]\s*)("[^"]+"|'[^']+'|[^\s,|]+)/g)||[]).flatten().each(function(W){var X=W.match(/^[\s|:|,]*(.*?)[\s]*$/);if(X){S.push(X[1])}});N.filters.push([T,S])}})}}},render:function(N){if(this.name==null){return""}output=N.get(this.name);this.filters.each(function(Q){var P=Q[0],O=$A(Q[1]||[]).map(function(R){return N.get(R)});O.unshift(output);output=N.invoke(P,O)});return output}});var F=new Class({initialize:function(P,N,O){this.left=P;this.operator=N;this.right=O;this.childRelation=null;this.childCondition=null;this.attachment=null},evaluate:function(O){O=O||new K();var N=this.interpretCondition(this.left,this.right,this.operator,O);switch(this.childRelation){case"or":return(N||this.childCondition.evaluate(O));case"and":return(N&&this.childCondition.evaluate(O));default:return N}},or:function(N){this.childRelation="or";this.childCondition=N},and:function(N){this.childRelation="and";this.childCondition=N},attach:function(N){this.attachment=N;return this.attachment},isElse:false,interpretCondition:function(Q,P,R,O){if(!R){return O.get(Q)}Q=O.get(Q);P=O.get(P);R=F.operators[R];if(!R){throw ("Unknown operator "+R)}var N=R(Q,P);return N},toString:function(){return"<Condition "+this.left+" "+this.operator+" "+this.right+">"}});F.operators={"==":function(N,O){return(N==O)},"=":function(N,O){return(N==O)},"!=":function(N,O){return(N!=O)},"<>":function(N,O){return(N!=O)},"<":function(N,O){return(N<O)},">":function(N,O){return(N>O)},"<=":function(N,O){return(N<=O)},">=":function(N,O){return(N>=O)},contains:function(N,O){return N.contains(O)},hasKey:function(N,O){return $H(N).getKeys().contains(O)},hasValue:function(N,O){return $H(N).getValue(O)}};var B=new Class({Extends:F,isElse:true,evaluate:function(N){return true},toString:function(){return"<ElseCondition>"}});var H=new Class({setContext:function(N){this.context=N},beforeMethod:function(N){},invokeDrop:function(O){var N=this.beforeMethod();if(!N&&(O in this)){N=this[O].apply(this)}return N},hasKey:function(N){return true}});I.registerTag("assign",new Class({tagSyntax:/((?:\(?[\w\-\.\[\]]\)?)+)\s*=\s*((?:"[^"]+"|'[^']+'|[^\s,|]+)+)/,Extends:A,initialize:function(O,N,Q){var P=N.match(this.tagSyntax);if(P){this.to=P[1];this.from=P[2]}else{throw ("Syntax error in 'assign' - Valid syntax: assign [var] = [source]")}this.parent(O,N,Q)},render:function(N){N.scopes.getLast()[this.to.toString()]=N.get(this.from);return""}}));I.registerTag("cache",new Class({tagSyntax:/(\w+)/,Extends:D,initialize:function(O,N,Q){var P=N.match(this.tagSyntax);if(P){this.to=P[1]}else{throw ("Syntax error in 'cache' - Valid syntax: cache [var]")}this.parent(O,N,Q)},render:function(O){var N=this.parent(O);O.scopes.getLast()[this.to]=$splat(N).join("");return""}}));I.registerTag("capture",new Class({tagSyntax:/(\w+)/,Extends:D,initialize:function(O,N,Q){var P=N.match(this.tagSyntax);if(P){this.to=P[1]}else{throw ("Syntax error in 'capture' - Valid syntax: capture [var]")}this.parent(O,N,Q)},render:function(O){var N=this.parent(O);O.set(this.to,$splat(N).join(""));return""}}));I.registerTag("case",new Class({tagSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)/,tagWhenSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)(?:(?:\s+or\s+|\s*\,\s*)("[^"]+"|'[^']+'|[^\s,|]+.*))?/,Extends:D,initialize:function(O,N,Q){this.blocks=[];this.nodelist=[];var P=N.match(this.tagSyntax);if(P){this.left=P[1]}else{throw ("Syntax error in 'case' - Valid syntax: case [condition]")}this.parent(O,N,Q)},unknownTag:function(N,O,P){switch(N){case"when":this.recordWhenCondition(O);break;case"else":this.recordElseCondition(O);break;default:this.parent(N,O,P)}},render:function(P){var O=this,N=$A([]),Q=true;P.stack(function(){for(var R=0;R<O.blocks.length;R++){var S=O.blocks[R];if(S.isElse){if(Q==true){N.extend(O.renderAll(S.attachment,P))}return N}else{if(S.evaluate(P)){Q=false;N.extend(O.renderAll(S.attachment,P))}}}});return N},recordWhenCondition:function(N){while(N){var O=N.match(this.tagWhenSyntax);if(!O){throw ("Syntax error in tag 'case' - Valid when condition: {% when [condition] [or condition2...] %} ")}N=O[2];var P=new F(this.left,"==",O[1]);this.blocks.push(P);this.nodelist=P.attach([])}},recordElseCondition:function(N){if((N||"").trim()!=""){throw ("Syntax error in tag 'case' - Valid else condition: {% else %} (no parameters) ")}var O=new B();this.blocks.push(O);this.nodelist=O.attach([])}}));I.registerTag("comment",new Class({Extends:D,render:function(N){return""}}));I.registerTag("cycle",new Class({Extends:A,tagSimpleSyntax:/"[^"]+"|'[^']+'|[^\s,|]+/,tagNamedSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)\s*\:\s*(.*)/,initialize:function(N,O,Q){var P,R;P=O.match(this.tagNamedSyntax);if(P){this.variables=this.variablesFromString(P[2]);this.name=P[1]}else{P=O.match(this.tagSimpleSyntax);if(P){this.variables=this.variablesFromString(O);this.name="'"+this.variables.toString()+"'"}else{throw ("Syntax error in 'cycle' - Valid syntax: cycle [name :] var [, var2, var3 ...]")}}this.parent(N,O,Q)},render:function(Q){var O=this,P=Q.get(O.name),N="";if(!Q.registers.cycle){Q.registers.cycle=$H({})}if(!Q.registers.cycle[P]){Q.registers.cycle[P]=0}Q.stack(function(){var R=Q.registers.cycle[P],S=Q.get(O.variables[R]);R+=1;if(R==O.variables.length){R=0}Q.registers.cycle[P]=R;N=S});return N},variablesFromString:function(N){return N.split(",").map(function(O){var P=O.match(/\s*("[^"]+"|'[^']+'|[^\s,|]+)\s*/);return(P[1])?P[1]:null})}}));I.registerTag("for",new Class({Extends:D,tagSyntax:/(\w+)\s+in\s+((?:\(?[\w\-\.\[\]]\)?)+)/,initialize:function(N,O,S){var R=O.match(this.tagSyntax);if(R){this.variableName=R[1];this.collectionName=R[2];this.name=this.variableName+"-"+this.collectionName;this.attributes=$H({});var Q=O.replace(this.tagSyntax,"");var P=O.match(/(\w*?)\s*\:\s*("[^"]+"|'[^']+'|[^\s,|]+)/g);if(P){P.each(function(T){T=T.split(":");this.attributes[T[0].trim()]=T[1].trim()},this)}}else{throw ("Syntax error in 'for loop' - Valid syntax: for [item] in [collection]")}this.parent(N,O,S)},render:function(O){var V=this,Q=[],U=$A(O.get(this.collectionName)||[]),T=[0,U.length];if(!O.registers["for"]){O.registers["for"]=$H({})}if(this.attributes.limit||this.attributes.offset){var S=0,R=0,N=0,P=null;if(this.attributes.offset=="continue"){S=O.registers["for"][this.name]}else{S=O.get(this.attributes.offset)||0}R=O.get(this.attributes.limit);N=(R)?S+R+1:U.length;T=[S,N-1];O.registers["for"][this.name]=N}segment=U.slice(T[0],T[1]);if(!segment||segment.length==0){return""}O.stack(function(){var W=segment.length;segment.each(function(Y,X){O.set(V.variableName,Y);O.set("forloop",{name:V.name,length:W,index:(X+1),index0:X,rindex:(W-X),rindex0:(W-X-1),first:(X==0),last:(X==(W-1))});Q.push((V.renderAll(V.nodelist,O)||[]).join(""))})});return Q.join("")}}));I.registerTag("if",new Class({Extends:D,tagSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)\s*([=!<>a-z_]+)?\s*("[^"]+"|'[^']+'|[^\s,|]+)?/,initialize:function(N,O,P){this.nodelist=[];this.blocks=[];this.pushBlock("if",O);this.parent(N,O,P)},unknownTag:function(N,O,P){if($A(["elsif","else"]).contains(N)){this.pushBlock(N,O)}else{this.parent(N,O,P)}},render:function(P){var O=this,N="";P.stack(function(){for(var Q=0;Q<O.blocks.length;Q++){var R=O.blocks[Q];if(R.evaluate(P)){N=O.renderAll(R.attachment,P);return }}});return N},pushBlock:function(N,P){var T;if(N=="else"){T=new B()}else{var S=P.split(/\b(and|or)\b/).reverse(),R=S.shift().match(this.tagSyntax);if(!R){throw ("Syntax Error in tag '"+N+"' - Valid syntax: "+N+" [expression]")}var U=new F(R[1],R[2],R[3]);while(S.length>0){var O=S.shift(),R=S.shift().match(this.tagSyntax);if(!R){throw ("Syntax Error in tag '"+N+"' - Valid syntax: "+N+" [expression]")}var Q=new F(R[1],R[2],R[3]);Q[O](U);U=Q}T=U}T.attach($A([]));this.blocks.push(T);this.nodelist=T.attachment}}));I.registerTag("ifchanged",new Class({Extends:D,render:function(P){var O=this,N="";P.stack(function(){var Q=O.renderAll(O.nodelist,P).join("");if(Q!=P.registers.ifchanged){N=Q;P.registers.ifchanged=N}});return N}}));I.registerTag("include",new Class({Extends:A,tagSyntax:/((?:"[^"]+"|'[^']+'|[^\s,|]+)+)(\s+(?:with|for)\s+((?:"[^"]+"|'[^']+'|[^\s,|]+)+))?/,initialize:function(N,O,R){var Q=(O||"").match(this.tagSyntax);if(Q){this.templateName=Q[1];this.templateNameVar=this.templateName.substring(1,this.templateName.length-1);this.variableName=Q[3];this.attributes=$H({});var P=O.match(/(\w*?)\s*\:\s*("[^"]+"|'[^']+'|[^\s,|]+)/g);if(P){P.each(function(S){S=S.split(":");this.attributes[S[0].trim()]=S[1].trim()},this)}}else{throw ("Error in tag 'include' - Valid syntax: include '[template]' (with|for) [object|collection]")}this.parent(N,O,R)},render:function(R){var P=this,S=Liquid.readTemplateFile(R.get(this.templateName)),O=Liquid.parse(S),Q=R.get((this.variableName||this.templateNameVar)),N="";R.stack(function(){P.attributes.each(function(U,T){R.set(T,R.get(U))});if($type(Q)=="array"){N=Q.map(function(T){R.set(P.templateNameVar,T);return O.render(R)})}else{R.set(P.templateNameVar,Q);N=O.render(R)}});return $splat(N).join("")}}));I.registerTag("unless",new Class({Extends:I.tags["if"],render:function(P){var O=this,N="";P.stack(function(){var R=O.blocks[0];if(!R.evaluate(P)){N=O.renderAll(R.attachment,P);return }for(var Q=1;Q<O.blocks.length;Q++){var R=O.blocks[Q];if(R.evaluate(P)){N=O.renderAll(R.attachment,P);return }}});return N}}));I.registerFilter({size:function(N){return(N.length)?N.length:0},downcase:function(N){return N.toString().toLowerCase()},upcase:function(N){return N.toString().toUpperCase()},capitalize:function(N){return N.toString().capitalize()},escape:function(N){N=N.toString();N=N.replace(/&/g,"&amp;");N=N.replace(/</g,"&lt;");N=N.replace(/>/g,"&gt;");N=N.replace(/"/g,"&quot;");return N},h:function(N){N=N.toString();N=N.replace(/&/g,"&amp;");N=N.replace(/</g,"&lt;");N=N.replace(/>/g,"&gt;");N=N.replace(/"/g,"&quot;");return N},truncate:function(O,Q,P){if(!O||O==""){return""}Q=Q||50;P=P||"...";var N=O.slice(0,Q);return N+P},truncatewords:function(O,R,P){if(!O||O==""){return""}R=parseInt(R||15);P=P||"...";var Q=O.toString().split(" "),N=Math.max((R),0);return(Q.length>N)?Q.slice(0,N).join(" ")+P:O},truncate_words:function(O,R,P){if(!O||O==""){return""}R=parseInt(R||15);P=P||"...";var Q=O.toString().split(" "),N=Math.max((R),0);return(Q.length>N)?Q.slice(0,N).join(" ")+P:O},strip_html:function(N){return N.toString().replace(/<.*?>/g,"")},strip_newlines:function(N){return N.toString().replace(/\n/g,"")},join:function(N,O){O=O||" ";return $splat(N).join(O)},sort:function(N){return $splat(N).sort()},reverse:function(N){return $splat(N).reverse()},replace:function(N,O,P){P=P||"";return N.toString().replace(new RegExp(O,"g"),P)},replace_first:function(N,O,P){P=P||"";return N.toString().replace(new RegExp(O,""),P)},newline_to_br:function(N){return N.toString().replace(/\n/g,"<br/>\n")},date:function(N,P){var O;if($type(N)=="date"){O=N}if($type(O)!="date"&&N=="now"){O=new Date()}if($type(O)!="date"){O=new Date(N)}if($type(O)!="date"){O=new Date(Date.parse(N))}if($type(O)!="date"){return N}return O.strftime(P)},first:function(N){return $splat(N)[0]},last:function(N){N=$splat(N);return N[N.length-1]}});return{Template:I,Block:D,Tag:A,Drop:H,readTemplateFile:function(N){throw ("This liquid context does not allow includes.")},registerFilters:function(N){I.registerFilter(N)},parse:function(N){return I.parse(N)}}})();if(!(new Date()).strftime){(function(){Date.ext={};Date.ext.util={};Date.ext.util.xPad=function(A,C,B){if(typeof (B)=="undefined"){B=10}for(;parseInt(A,10)<B&&B>1;B/=10){A=C.toString()+A}return A.toString()};Date.prototype.locale="en-GB";if(document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang){Date.prototype.locale=document.getElementsByTagName("html")[0].lang}Date.ext.locales={};Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"};Date.ext.locales["en-US"]=Date.ext.locales.en;Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z";Date.ext.locales["en-US"].x="%D";Date.ext.locales["en-US"].X="%r";Date.ext.locales["en-GB"]=Date.ext.locales.en;Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"];Date.ext.formats={a:function(A){return Date.ext.locales[A.locale].a[A.getDay()]},A:function(A){return Date.ext.locales[A.locale].A[A.getDay()]},b:function(A){return Date.ext.locales[A.locale].b[A.getMonth()]},B:function(A){return Date.ext.locales[A.locale].B[A.getMonth()]},c:"toLocaleString",C:function(A){return Date.ext.util.xPad(parseInt(A.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(A){return Date.ext.util.xPad(parseInt(Date.ext.util.G(A)/100,10),0)},G:function(C){var D=C.getFullYear();var B=parseInt(Date.ext.formats.V(C),10);var A=parseInt(Date.ext.formats.W(C),10);if(A>B){D++}else{if(A===0&&B>=52){D--}}return D},H:["getHours","0"],I:function(B){var A=B.getHours()%12;return Date.ext.util.xPad(A===0?12:A,0)},j:function(C){var A=C-new Date(""+C.getFullYear()+"/1/1 GMT");A+=C.getTimezoneOffset()*60000;var B=parseInt(A/60000/60/24,10)+1;return Date.ext.util.xPad(B,0,100)},m:function(A){return Date.ext.util.xPad(A.getMonth()+1,0)},M:["getMinutes","0"],p:function(A){return Date.ext.locales[A.locale].p[A.getHours()>=12?1:0]},P:function(A){return Date.ext.locales[A.locale].P[A.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(A){var B=A.getDay();return B===0?7:B},U:function(D){var A=parseInt(Date.ext.formats.j(D),10);var C=6-D.getDay();var B=parseInt((A+C)/7,10);return Date.ext.util.xPad(B,0)},V:function(D){var C=parseInt(Date.ext.formats.W(D),10);var A=(new Date(""+D.getFullYear()+"/1/1")).getDay();var B=C+(A>4||A<=1?0:1);if(B==53&&(new Date(""+D.getFullYear()+"/12/31")).getDay()<4){B=1}else{if(B===0){B=Date.ext.formats.V(new Date(""+(D.getFullYear()-1)+"/12/31"))}}return Date.ext.util.xPad(B,0)},w:"getDay",W:function(D){var A=parseInt(Date.ext.formats.j(D),10);var C=7-Date.ext.formats.u(D);var B=parseInt((A+C)/7,10);return Date.ext.util.xPad(B,0,10)},y:function(A){return Date.ext.util.xPad(A.getFullYear()%100,0)},Y:"getFullYear",z:function(C){var B=C.getTimezoneOffset();var A=Date.ext.util.xPad(parseInt(Math.abs(B/60),10),0);var D=Date.ext.util.xPad(B%60,0);return(B>0?"-":"+")+A+D},Z:function(A){return A.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(A){return"%"}};Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};Date.ext.aggregates.z=Date.ext.formats.z(new Date());Date.ext.aggregates.Z=Date.ext.formats.Z(new Date());Date.ext.unsupported={};Date.prototype.strftime=function(A){if(!(this.locale in Date.ext.locales)){if(this.locale.replace(/-[a-zA-Z]+$/,"") in Date.ext.locales){this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")}else{this.locale="en-GB"}}var C=this;while(A.match(/%[cDhnrRtTxXzZ]/)){A=A.replace(/%([cDhnrRtTxXzZ])/g,function(E,D){var F=Date.ext.aggregates[D];return(F=="locale"?Date.ext.locales[C.locale][D]:F)})}var B=A.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(E,D){var F=Date.ext.formats[D];if(typeof (F)=="string"){return C[F]()}else{if(typeof (F)=="function"){return F.call(C,C)}else{if(typeof (F)=="object"&&typeof (F[0])=="string"){return Date.ext.util.xPad(C[F[0]](),F[1])}else{return D}}}});C=null;return B}})()};